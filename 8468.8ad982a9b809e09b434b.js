"use strict";(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[8468],{18468:(e,r,n)=>{n.r(r),n.d(r,{default:()=>p});var t=n(67294),a=n(9669),o=n.n(a),i=n(50158),c=n(75756),u=n(91296),g=n.n(u),s=n(70805),l=n(39704),d=n(49795),h=n(67595),f=n(76362),m=n(14586);const M=(0,s.QM)({editor:{height:"calc(100vh - 90px)"},editorMarginHint:{backgroundColor:"var(--light)"},editorMarginInfo:{backgroundColor:"var(--info)"},editorMarginError:{backgroundColor:"var(--danger)"},editorMarginWarning:{backgroundColor:"var(--warning)"},editorHighlightLine:{backgroundColor:"var(--primary)"}}),p=()=>{const e=(0,t.useRef)(null),r=(0,t.useRef)({}),n=(0,t.useRef)([]),a=M(),u=(0,l.v9)((e=>(0,h.eE)(e))),s=(0,l.v9)((e=>(0,h.F$)(e))),p=(0,l.v9)((e=>(0,h.uF)(e))),v=(0,l.I0)();return(0,t.useEffect)((()=>{(0,c.setDiagnosticsOptions)({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"oas3-completion.schema.json",fileMatch:["*"]}]}),r.current=i.editor.create(e.current,{value:"",language:"yaml",glyphMargin:!0,theme:"vs-dark",automaticLayout:!0}),r.current.getModel().updateOptions({tabSize:2}),r.current.onDidChangeModelContent(g()((()=>{const e=r.current.getModel().getValue();v((0,d.tD)(e))}),1e3)),r.current.changeViewZones((e=>{e.addZone({afterLineNumber:0,heightInPx:20,domNode:document.createElement("span")})}))}),[v]),(0,t.useEffect)((()=>{p&&(async()=>{try{const{data:e}=await o().get(p);r.current.getModel().setValue(e),v((0,d.tD)(e))}catch(e){console.error(e),alert(e.message)}})()}),[p,v]),(0,t.useEffect)((()=>{if(null===u)return void(n.current=r.current.deltaDecorations(n.current,[]));const e=(0,m.Wg)(u);r.current.deltaDecorations(n.current,[]);const t=[];for(const[r,n]of e.entries())t.push({range:new i.Range(Number(r),1,Number(r),1),options:{glyphMarginClassName:(0,m.g9)(n)===f.pn?a.editorMarginError:(0,m.g9)(n)===f.cM?a.editorMarginWarning:(0,m.g9)(n)===f.H_?a.editorMarginInfo:(0,m.g9)(n)===f.R0?a.editorMarginHint:a.editorMarginError}});n.current=r.current.deltaDecorations([],t)}),[u,a.editorHighlightLine,a.editorMarginError,a.editorMarginWarning,a.editorMarginInfo,a.editorMarginHint]),(0,t.useEffect)((()=>{s&&(r.current.revealLineInCenter(s.line),r.current.setPosition({lineNumber:s.line,column:s.character}),r.current.focus())}),[s]),t.createElement("div",{ref:e,className:a.editor})}}}]);